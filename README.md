# LPC2ASE

This tool makes Aseprite files of characters generated by the Universal LPC Character Generator.
https://liberatedpixelcup.github.io/Universal-LPC-Spritesheet-Character-Generator/

- Support for all LPC character file formats
  - Single image
  - Image pack - from folder or zip file
    - Split by animation
    - Split by item
    - Split by animation and item
- Graphic and command-line interfaces
- Detailed animation config in GUI or a CSV file
  - Include each animation or not
  - Set each animation name and speed

## Install

Download and install the extension from [Releases](https://github.com/ioribranford/aseprite-import-lpc-character/releases)

Or you may clone this repo directly to your Aseprite extensions directory.

## GUI Use

In the File > Import... menu
- **Import LPC Character**
- **Import Current LPC Character** - as the 1st but with the currently open spritesheet image as the input file

### Main Window

- **Input**: select single image or image pack downloaded from ULPCCG
  - For image pack select either pack zip file, or character.json file in pack folder
- **Output**: select save path of the output sprite
- **Sprite size**: 64, 128, or 192
  - If your image pack is split by animation, or by animation and item, the size automatically grows as needed during the import.
- **Load animation CSV**: loads animation settings from a CSV
  - You can change them afterward in Animation settings...
- **Animation settings...**: Opens the detailed animation setting window
- **Import** - starts the import, requires an input and an output

### Animation Settings Window

The animations are listed in the order they appear in ULPCCG. You can set which of the animations you want in the sprite, and their names and frame durations. 

Some are sub-animations using some frames of their parent animations. They cannot have different frame durations from their parents at this time. You can exclude these sub-animations with **No sub**.

You can also set all animations' frame durations at once, and save these settings with **Save CSV**.

## Command-Line Use

Open a shell in the extension install folder.
Easiest access:
- File > Scripts > Open script folder
- Go up one directory
- Enter `extensions`
- Enter `import-lpc-character`

In order to use the CLI, make sure the shell can find the Aseprite executable.
There are some ways to do this:
- Add executable's directory to the system `PATH`
  - This requires the executable be named `aseprite.exe` on Windows or `aseprite` otherwise
- In a system `PATH` directory, make a symbolic link to the executable

### Using cli.lua

You can run cli.lua directly. For help, simply run it without arguments:
```
aseprite -b --script cli.lua
```

Note that all `--script-param`s must come before `--script cli.lua`.

### Using lpc2ase

A bash script with more concise command-line options.
It supports an environment variable `ASEPRITE` with the Aseprite executable path.

Run `lpc2ase` without arguments for help.

## Directional Animations

Most animations have 4 directions; each direction has a number 0-3 appended. These numbers are chosen for easier conversion from angle values, assuming a standard 2D graphics coordinate system where +X = right and +Y = down.
- 0 = right (0 degrees)
- 1 = down (90 degrees)
- 2 = left (180 degrees)
- 3 = up (270 degrees)

## Extra Animations

Some items give the character extra animations with varying frame sizes. In ULPCCG you can find them on the bottom of the sheet (after the "1-Handed Halfslash"). In this case is recommended to download the character **Split by animation** or **Split by animation and item** to use with this tool.

If you download a single sheet or split by item, there is currently no way to know how to slice them correctly. The extra animation sheet(s) will be simply saved to an `.extra.ase` file. You'll have to handle these animations manually.